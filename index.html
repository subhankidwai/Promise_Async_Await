<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>
    <h1>Promise Async Await</h1>
    <h3>Q.1 - Write one example explaining how you can write a callback function.</h3>
    <pre>
        function age(a,b){
            return a + b;
        }
        function detail(name,age){
            console.log(`${name} ${age}`)
        }
        detail("hello", age(20,30))
    </pre>

    <h3>Q.2 - "Write a callback function to print numbers from 1 to 7, in which 1 should be printed after 1 sec, 2 should be printed after 2 sec, 3 should be printed after 3 sec, and so on. 

        Explain callback hell.
        Numbers
        1
        2
        3
        4
        5
        6
        7"</h3>
    <pre>
        let count=1;
        function test(){
            setTimeout(()=>{
                console.log(count++);
                setTimeout(()=>{
                    console.log(count++);
                    setTimeout(()=>{
                        console.log(count++);
                        setTimeout(()=>{
                            console.log(count++);
                            setTimeout(()=>{
                                console.log(count++);
                                setTimeout(()=>{
                                    console.log(count++);
                                    setTimeout(()=>{
                                        console.log(count++);
                                    },7000)
                                },6000)
                            },5000)
                        },4000)
                    },3000)
                },2000)
            },1000)
        }

        test()
    </pre>
    <h3>Q.3 - "Write the promise function to print numbers from 1 to 7, in which 1 should be printed after 1 sec, 2 should be printed after 2 sec, 3 should be printed after 3 sec, and so on. 

        Numbers
        1
        2
        3
        4
        5
        6
        7"</h3>
    <pre>
        let count=1;
        let myPromise = new Promise(function(res, rej){
        setTimeout(() => {
            res(console.log(count++));
            setTimeout(()=>{
            res(console.log(count++));
            setTimeout(()=>{
                res(console.log(count++));
                setTimeout(()=>{
                res(console.log(count++));
                setTimeout(()=>{
                    res(console.log(count++));
                    setTimeout(()=>{
                    res(console.log(count++));
                    setTimeout(()=>{
                        res(console.log(count++));
                    },7000)
                    },6000)
                },5000)
                },4000)
            },3000)
            },2000)
        },1000);
        })
        myPromise.then();
    </pre>

    <h3>Q.4 - "Create a promise function accepting an argument, if yes is passed to the function then it should go to resolved state and print Promise Resolved, and if nothing is passed 
    then it should go to reject the state and catch the error and print Promise Rejected "</h3>
    <pre>
        let n=2;
        const myPromise = new Promise(function(res, rej){
        if (n>0){
            res()
        }
        else {
            rej()
        }
        })

        myPromise. 
            then(function () { 
                console.log("Promise Resolved"); 
            }). 
            catch(function () { 
                console.log("Promise Rejected"); 
            });
    </pre>


    <h3>Q.5 - Create examples to explain callback function</h3>
    <pre>
        // function
        function greet(name, callback) {
            console.log('Hi' + ' ' + name);
            callback();
        }

        // callback function
        function callMe() {
            console.log('I am callback function');
        }

        // passing function as an argument
        greet('Peter', callMe);
    </pre>

    <h3>Q.6 - Create examples to explain callback hell function</h3>
    <pre>
        Callback Hell is a pattern with multiple nested callbacks which makes code hard to read and debug when dealing with asynchronous logic. The callback hell looks like a pyramid structure.

        function test(){
            setTimeout(()=>{
                console.log(1);
                setTimeout(()=>{
                    console.log(2);
                    setTimeout(()=>{
                        console.log(3);
                        setTimeout(()=>{
                            console.log(4);
                            setTimeout(()=>{
                                console.log(5);
                                setTimeout(()=>{
                                    console.log(6);
                                    setTimeout(()=>{
                                        console.log(7);
                                    })
                                })
                            })
                        })
                    })
                })
            })
        }        
    </pre>

    <h3>Q.7 - Create examples to explain promises function</h3>
    <pre>
        let n=2;
        const myPromise = new Promise(function(res, rej){
        if (n>0){
            res()
        }
        else {
            rej()
        }
        })

        myPromise. 
            then(function () { 
                console.log("Promise Resolved"); 
            }). 
            catch(function () { 
                console.log("Promise Rejected"); 
            });
    </pre>

    <h3>Q.8 - Create examples to explain async await function</h3>
    <pre>
        // async function example

        async function f() {
            console.log('Async function.');
            return Promise.resolve();
        }

        f();
    </pre>
    <pre>
        // await function example

        // a promise
        let promise = new Promise(function (resolve, reject) {
            setTimeout(function () {
                resolve('Promise resolved')
            }, 4000);
        });

        // async function
        async function asyncFunc() {

            // wait until the promise resolves 
            let result = await promise;

            console.log(result);
            console.log('hello');
        }

        // calling the async function
        asyncFunc();
    </pre>

    <h3>Q.9 - Create examples to explain promise.all function</h3>
    <pre>
        const p1 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The first promise has resolved');
                resolve(10);
            }, 1 * 1000);
        });
        const p2 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The second promise has resolved');
                resolve(20);
            }, 2 * 1000);
        });
        const p3 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The third promise has resolved');
                resolve(30);
            }, 3 * 1000);
        });

        Promise.all([p1, p2, p3]).then((results) => {
            const total = results.reduce((p, c) => p + c);

            console.log(`Results: ${results}`);
            console.log(`Total: ${total}`);
        });
    </pre>


    <script src="./script.js"></script>
</body>
</html>